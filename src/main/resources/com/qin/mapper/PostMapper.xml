<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qin.dao.PostMapper">
  <resultMap id="BaseResultMap" type="com.qin.pojo.Post">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="category_id" jdbcType="INTEGER" property="categoryId" />
    <result column="time" jdbcType="TIMESTAMP" property="time" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="detail" jdbcType="VARCHAR" property="detail" />
    <result column="picture_url" jdbcType="VARCHAR" property="pictureUrl" />
    <result column="picture" jdbcType="LONGVARCHAR" property="picture" />
    <result column="LoF" javaType="INTEGER" property="LoF"/>
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from laf_post
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.qin.pojo.Post">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into laf_post (id, name, category_id, 
      time, address, detail, 
      picture_url, picture)
    values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{categoryId,jdbcType=INTEGER}, 
      #{time,jdbcType=TIMESTAMP}, #{address,jdbcType=VARCHAR}, #{detail,jdbcType=VARCHAR}, 
      #{pictureUrl,jdbcType=VARCHAR}, #{picture,jdbcType=LONGVARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.qin.pojo.Post">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update laf_post
    set name = #{name,jdbcType=VARCHAR},
      category_id = #{categoryId,jdbcType=INTEGER},
      time = #{time,jdbcType=TIMESTAMP},
      address = #{address,jdbcType=VARCHAR},
      detail = #{detail,jdbcType=VARCHAR},
      picture_url = #{pictureUrl,jdbcType=VARCHAR},
      picture = #{picture,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, name, category_id, time, address, detail, picture_url, picture
    from laf_post
    where id = #{id,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, name, category_id, time, address, detail, picture_url, picture,LoF
    from laf_post
  </select>

  <select id="retrieve" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, name, category_id, time, address, detail, picture_url, picture,LoF
    from laf_post
    <where>
      <if test="keyword!=null">
        name like concat('%',#{keyword},'%') or detail like concat('%',#{keyword},'%')  /*覆盖索引name*/
      </if>
      <if test="categoryId!=null">
        and category_id=#{categoryId}
      </if>
      <if test="time!=null">
        and time between #{time} and now()
      </if>
      <if test="address!=null">
        and address=#{address}
      </if>
      <if test="LoF!=null">
        and LoF=#{LoF}
      </if>

    </where>
  </select>

</mapper>